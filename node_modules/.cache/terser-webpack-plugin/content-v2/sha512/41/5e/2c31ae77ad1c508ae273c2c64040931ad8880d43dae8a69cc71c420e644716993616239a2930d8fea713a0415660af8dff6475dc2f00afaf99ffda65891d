{"code":"module.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=11)}([function(t,e){t.exports=require(\"openseadragon\")},function(t,e,n){t.exports.Dispatcher=n(2)},function(t,e,n){\"use strict\";e.__esModule=!0;var o=n(3),r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return t.prototype.register=function(t){var e=\"ID_\"+this._lastID++;return this._callbacks[e]=t,e},t.prototype.unregister=function(t){this._callbacks[t]||o(!1),delete this._callbacks[t]},t.prototype.waitFor=function(t){this._isDispatching||o(!1);for(var e=0;e<t.length;e++){var n=t[e];this._isPending[n]?this._isHandled[n]||o(!1):(this._callbacks[n]||o(!1),this._invokeCallback(n))}},t.prototype.dispatch=function(t){this._isDispatching&&o(!1),this._startDispatching(t);try{for(var e in this._callbacks)this._isPending[e]||this._invokeCallback(e)}finally{this._stopDispatching()}},t.prototype.isDispatching=function(){return this._isDispatching},t.prototype._invokeCallback=function(t){this._isPending[t]=!0,this._callbacks[t](this._pendingPayload),this._isHandled[t]=!0},t.prototype._startDispatching=function(t){for(var e in this._callbacks)this._isPending[e]=!1,this._isHandled[e]=!1;this._pendingPayload=t,this._isDispatching=!0},t.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},t}();t.exports=r},function(t,e,n){\"use strict\";var o=function(t){};t.exports=function(t,e,n,r,i,s,a,l){if(o(e),!t){var c;if(void 0===e)c=new Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else{var p=[n,r,i,s,a,l],d=0;(c=new Error(e.replace(/%s/g,function(){return p[d++]}))).name=\"Invariant Violation\"}throw c.framesToPop=1,c}}},function(t,e,n){var o=n(5);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(9)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(6)(!1);var o=n(7)(n(8));e.push([t.i,\"svg polyline,\\nsvg polygon,\\nsvg line,\\nsvg ellipse,\\nsvg rect,\\nsvg path {\\n  stroke-linejoin: round;\\n  stroke-linecap: round;\\n  vector-effect: non-scaling-stroke;\\n  cursor: pointer;\\n}\\nsvg polyline.active,\\nsvg polygon.active,\\nsvg line.active,\\nsvg ellipse.active,\\nsvg rect.active,\\nsvg path.active {\\n  stroke: #ffff00;\\n}\\n.icon-close {\\n  position: absolute;\\n  height: 16px;\\n  width: 16px;\\n  background-image: url(\"+o+\");\\n  background-repeat: no-repeat;\\n  background-size: contain;\\n  cursor: pointer;\\n}\\n.start-point,\\n.end-point {\\n  position: absolute;\\n  transform: translate(-50%, -50%);\\n  height: 6px;\\n  width: 6px;\\n  border: 2px solid red;\\n  border-radius: 50%;\\n  background-color: #fff;\\n}\\n.measure-tip {\\n  position: absolute;\\n  display: inline-block;\\n  padding: 0 4px;\\n  height: 20px;\\n  color: #fff;\\n  background-color: #2E2E35;\\n  border-radius: 5px;\\n  font-size: 12px;\\n  font-weight: normal;\\n  line-height: 20px;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n\",\"\"])},function(t,e,n){\"use strict\";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||\"\",o=t[3];if(!o)return n;if(e&&\"function\"==typeof btoa){var r=(s=o,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),l=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(a),\"/*# \".concat(l,\" */\")),i=o.sources.map(function(t){return\"/*# sourceURL=\".concat(o.sourceRoot).concat(t,\" */\")});return[n].concat(i).concat([r]).join(\"\\n\")}var s,a,l;return[n].join(\"\\n\")}(e,t);return e[2]?\"@media \".concat(e[2],\"{\").concat(n,\"}\"):n}).join(\"\")},e.i=function(t,n){\"string\"==typeof t&&(t=[[null,t,\"\"]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];null!=i&&(o[i]=!0)}for(var s=0;s<t.length;s++){var a=t[s];null!=a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]=\"(\".concat(a[2],\") and (\").concat(n,\")\")),e.push(a))}},e}},function(t,e,n){\"use strict\";t.exports=function(t,e){return\"string\"!=typeof t?t:(/^['\"].*['\"]$/.test(t)&&(t=t.slice(1,-1)),/[\"'() \\t\\n]/.test(t)||e?'\"'.concat(t.replace(/\"/g,'\\\\\"').replace(/\\n/g,\"\\\\n\"),'\"'):t)}},function(t,e){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAATlBMVEVHcEz/SET/SET/SEP/SET/SET/RkD/SkP/R0P/R0T/SET/////Skb/wL//xMP/YFz/ZWH/09L/7e3/7u3/wL7/X1z/gH3/ZGH/ZWL/gH5SGK5CAAAACnRSTlMA8fSu7q0oJvOt9NGMTwAAAKVJREFUKM/F09kOwiAQBdCptgUuaxda/f8fNYWoVQZNX3QeCMkJZBYgEkqCDal6ItGiGq0ghWXUbIwLFElUVOsJkgBdDeA3PATv8s75MBQcAGO3jTXApWCP7JsiFuxM8qTGlanNCdIyc5mng3t9Kyx7TvAwPy63HNtnalYfLeylLb7gdd/UlRlJvI8kMiP5x2v5+JCb7RtMFb2i+/aJSHQnHptzTzf2sCZppluhwwAAAABJRU5ErkJggg==\"},function(t,e,n){var o,r,i={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),a=function(t){var e={};return function(t,n){if(\"function\"==typeof t)return t();if(void 0===e[t]){var o=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}}(),l=null,c=0,p=[],d=n(10);function u(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=i[o.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](o.parts[s]);for(;s<o.parts.length;s++)r.parts.push(g(o.parts[s],e))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(g(o.parts[s],e));i[o.id]={id:o.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],o={},r=0;r<t.length;r++){var i=t[r],s=e.base?i[0]+e.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function h(t,e){var n=a(t.insertInto);if(!n)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var o=p[p.length-1];if(\"top\"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),p.push(e);else if(\"bottom\"===t.insertAt)n.appendChild(e);else{if(\"object\"!=typeof t.insertAt||!t.insertAt.before)throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");var r=a(t.insertAt.before,n);n.insertBefore(e,r)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=p.indexOf(t);e>=0&&p.splice(e,1)}function m(t){var e=document.createElement(\"style\");if(void 0===t.attrs.type&&(t.attrs.type=\"text/css\"),void 0===t.attrs.nonce){var o=function(){0;return n.nc}();o&&(t.attrs.nonce=o)}return v(e,t.attrs),h(t,e),e}function v(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,o,r,i;if(e.transform&&t.css){if(!(i=\"function\"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}if(e.singleton){var s=c++;n=l||(l=m(e)),o=w.bind(null,n,s,!1),r=w.bind(null,n,s,!0)}else t.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(n=function(t){var e=document.createElement(\"link\");return void 0===t.attrs.type&&(t.attrs.type=\"text/css\"),t.attrs.rel=\"stylesheet\",v(e,t.attrs),h(t,e),e}(e),o=function(t,e,n){var o=n.css,r=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||i)&&(o=d(o));r&&(o+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+\" */\");var s=new Blob([o],{type:\"text/css\"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),r=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),o=function(t,e){var n=e.css,o=e.media;o&&t.setAttribute(\"media\",o);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){y(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}t.exports=function(t,e){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=typeof document)throw new Error(\"The style-loader cannot be used in a non-browser environment\");(e=e||{}).attrs=\"object\"==typeof e.attrs?e.attrs:{},e.singleton||\"boolean\"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto=\"head\"),e.insertAt||(e.insertAt=\"bottom\");var n=f(t,e);return u(n,e),function(t){for(var o=[],r=0;r<n.length;r++){var s=n[r];(a=i[s.id]).refs--,o.push(a)}t&&u(f(t,e),e);for(r=0;r<o.length;r++){var a;if(0===(a=o[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete i[a.id]}}}};var b,_=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join(\"\\n\")});function w(t,e,n,o){var r=n?\"\":o.css;if(t.styleSheet)t.styleSheet.cssText=_(e,r);else{var i=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e=\"undefined\"!=typeof window&&window.location;if(!e)throw new Error(\"fixUrls requires window.location\");if(!t||\"string\"!=typeof t)return t;var n=e.protocol+\"//\"+e.host,o=n+e.pathname.replace(/\\/[^\\/]*$/,\"/\");return t.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,function(t,e){var r,i=e.trim().replace(/^\"(.*)\"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(i)?t:(r=0===i.indexOf(\"//\")?i:0===i.indexOf(\"/\")?n+i:o+i.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(r)+\")\")})}},function(t,e,n){\"use strict\";n.r(e);var o=n(0),r=function(){},i={},s=[],a=[];function l(t,e){var n,o,l,c,p=a;for(c=arguments.length;c-- >2;)s.push(arguments[c]);for(e&&null!=e.children&&(s.length||s.push(e.children),delete e.children);s.length;)if((o=s.pop())&&void 0!==o.pop)for(c=o.length;c--;)s.push(o[c]);else\"boolean\"==typeof o&&(o=null),(l=\"function\"!=typeof t)&&(null==o?o=\"\":\"number\"==typeof o?o=String(o):\"string\"!=typeof o&&(l=!1)),l&&n?p[p.length-1]+=o:p===a?p=[o]:p.push(o),n=l;var d=new r;return d.nodeName=t,d.children=p,d.attributes=null==e?void 0:e,d.key=null==e?void 0:e.key,void 0!==i.vnode&&i.vnode(d),d}function c(t,e){for(var n in e)t[n]=e[n];return t}function p(t,e){null!=t&&(\"function\"==typeof t?t(e):t.current=e)}var d=\"function\"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;var u=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,f=[];function h(t){!t._dirty&&(t._dirty=!0)&&1==f.push(t)&&(i.debounceRendering||d)(y)}function y(){for(var t;t=f.pop();)t._dirty&&L(t)}function m(t,e,n){return\"string\"==typeof e||\"number\"==typeof e?void 0!==t.splitText:\"string\"==typeof e.nodeName?!t._componentConstructor&&v(t,e.nodeName):n||t._componentConstructor===e.nodeName}function v(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function g(t){var e=c({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===e[o]&&(e[o]=n[o]);return e}function b(t){var e=t.parentNode;e&&e.removeChild(t)}function _(t,e,n,o,r){if(\"className\"===e&&(e=\"class\"),\"key\"===e);else if(\"ref\"===e)p(n,null),p(o,t);else if(\"class\"!==e||r)if(\"style\"===e){if(o&&\"string\"!=typeof o&&\"string\"!=typeof n||(t.style.cssText=o||\"\"),o&&\"object\"==typeof o){if(\"string\"!=typeof n)for(var i in n)i in o||(t.style[i]=\"\");for(var i in o)t.style[i]=\"number\"==typeof o[i]&&!1===u.test(i)?o[i]+\"px\":o[i]}}else if(\"dangerouslySetInnerHTML\"===e)o&&(t.innerHTML=o.__html||\"\");else if(\"o\"==e[0]&&\"n\"==e[1]){var s=e!==(e=e.replace(/Capture$/,\"\"));e=e.toLowerCase().substring(2),o?n||t.addEventListener(e,w,s):t.removeEventListener(e,w,s),(t._listeners||(t._listeners={}))[e]=o}else if(\"list\"!==e&&\"type\"!==e&&!r&&e in t){try{t[e]=null==o?\"\":o}catch(t){}null!=o&&!1!==o||\"spellcheck\"==e||t.removeAttribute(e)}else{var a=r&&e!==(e=e.replace(/^xlink:?/,\"\"));null==o||!1===o?a?t.removeAttributeNS(\"http://www.w3.org/1999/xlink\",e.toLowerCase()):t.removeAttribute(e):\"function\"!=typeof o&&(a?t.setAttributeNS(\"http://www.w3.org/1999/xlink\",e.toLowerCase(),o):t.setAttribute(e,o))}else t.className=o||\"\"}function w(t){return this._listeners[t.type](i.event&&i.event(t)||t)}var x=[],k=0,M=!1,A=!1;function C(){for(var t;t=x.shift();)i.afterMount&&i.afterMount(t),t.componentDidMount&&t.componentDidMount()}function E(t,e,n,o,r,i){k++||(M=null!=r&&void 0!==r.ownerSVGElement,A=null!=t&&!(\"__preactattr_\"in t));var s=S(t,e,n,o,i);return r&&s.parentNode!==r&&r.appendChild(s),--k||(A=!1,i||C()),s}function S(t,e,n,o,r){var i=t,s=M;if(null!=e&&\"boolean\"!=typeof e||(e=\"\"),\"string\"==typeof e||\"number\"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),N(t,!0))),i.__preactattr_=!0,i;var a,l,c=e.nodeName;if(\"function\"==typeof c)return function(t,e,n,o){var r=t&&t._component,i=r,s=t,a=r&&t._componentConstructor===e.nodeName,l=a,c=g(e);for(;r&&!l&&(r=r._parentComponent);)l=r.constructor===e.nodeName;r&&l&&(!o||r._component)?(U(r,c,3,n,o),t=r.base):(i&&!a&&(P(i),t=s=null),r=T(e.nodeName,c,n),t&&!r.nextBase&&(r.nextBase=t,s=null),U(r,c,1,n,o),t=r.base,s&&t!==s&&(s._component=null,N(s,!1)));return t}(t,e,n,o);if(M=\"svg\"===c||\"foreignObject\"!==c&&M,c=String(c),(!t||!v(t,c))&&(a=c,(l=M?document.createElementNS(\"http://www.w3.org/2000/svg\",a):document.createElement(a)).normalizedNodeName=a,i=l,t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),N(t,!0)}var p=i.firstChild,d=i.__preactattr_,u=e.children;if(null==d){d=i.__preactattr_={};for(var f=i.attributes,h=f.length;h--;)d[f[h].name]=f[h].value}return!A&&u&&1===u.length&&\"string\"==typeof u[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=u[0]&&(p.nodeValue=u[0]):(u&&u.length||null!=p)&&function(t,e,n,o,r){var i,s,a,l,c,p=t.childNodes,d=[],u={},f=0,h=0,y=p.length,v=0,g=e?e.length:0;if(0!==y)for(var _=0;_<y;_++){var w=p[_],x=w.__preactattr_,k=g&&x?w._component?w._component.__key:x.key:null;null!=k?(f++,u[k]=w):(x||(void 0!==w.splitText?!r||w.nodeValue.trim():r))&&(d[v++]=w)}if(0!==g)for(var _=0;_<g;_++){l=e[_],c=null;var k=l.key;if(null!=k)f&&void 0!==u[k]&&(c=u[k],u[k]=void 0,f--);else if(h<v)for(i=h;i<v;i++)if(void 0!==d[i]&&m(s=d[i],l,r)){c=s,d[i]=void 0,i===v-1&&v--,i===h&&h++;break}c=S(c,l,n,o),a=p[_],c&&c!==t&&c!==a&&(null==a?t.appendChild(c):c===a.nextSibling?b(a):t.insertBefore(c,a))}if(f)for(var _ in u)void 0!==u[_]&&N(u[_],!1);for(;h<=v;)void 0!==(c=d[v--])&&N(c,!1)}(i,u,n,o,A||null!=d.dangerouslySetInnerHTML),function(t,e,n){var o;for(o in n)e&&null!=e[o]||null==n[o]||_(t,o,n[o],n[o]=void 0,M);for(o in e)\"children\"===o||\"innerHTML\"===o||o in n&&e[o]===(\"value\"===o||\"checked\"===o?t[o]:n[o])||_(t,o,n[o],n[o]=e[o],M)}(i,e.attributes,d),M=s,i}function N(t,e){var n=t._component;n?P(n):(null!=t.__preactattr_&&p(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||b(t),D(t))}function D(t){for(t=t.lastChild;t;){var e=t.previousSibling;N(t,!0),t=e}}var I=[];function T(t,e,n){var o,r=I.length;for(t.prototype&&t.prototype.render?(o=new t(e,n),R.call(o,e,n)):((o=new R(e,n)).constructor=t,o.render=O);r--;)if(I[r].constructor===t)return o.nextBase=I[r].nextBase,I.splice(r,1),o;return o}function O(t,e,n){return this.constructor(t,n)}function U(t,e,n,o,r){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||r?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,o)),o&&o!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=o),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==n&&(1!==n&&!1===i.syncComponentUpdates&&t.base?h(t):L(t,1,r)),p(t.__ref,t))}function L(t,e,n,o){if(!t._disable){var r,s,a,l=t.props,p=t.state,d=t.context,u=t.prevProps||l,f=t.prevState||p,h=t.prevContext||d,y=t.base,m=t.nextBase,v=y||m,b=t._component,_=!1,w=h;if(t.constructor.getDerivedStateFromProps&&(p=c(c({},p),t.constructor.getDerivedStateFromProps(l,p)),t.state=p),y&&(t.props=u,t.state=f,t.context=h,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(l,p,d)?_=!0:t.componentWillUpdate&&t.componentWillUpdate(l,p,d),t.props=l,t.state=p,t.context=d),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!_){r=t.render(l,p,d),t.getChildContext&&(d=c(c({},d),t.getChildContext())),y&&t.getSnapshotBeforeUpdate&&(w=t.getSnapshotBeforeUpdate(u,f));var M,A,S=r&&r.nodeName;if(\"function\"==typeof S){var D=g(r);(s=b)&&s.constructor===S&&D.key==s.__key?U(s,D,1,d,!1):(M=s,t._component=s=T(S,D,d),s.nextBase=s.nextBase||m,s._parentComponent=t,U(s,D,0,d,!1),L(s,1,n,!0)),A=s.base}else a=v,(M=b)&&(a=t._component=null),(v||1===e)&&(a&&(a._component=null),A=E(a,r,d,n||!y,v&&v.parentNode,!0));if(v&&A!==v&&s!==b){var I=v.parentNode;I&&A!==I&&(I.replaceChild(A,v),M||(v._component=null,N(v,!1)))}if(M&&P(M),t.base=A,A&&!o){for(var O=t,R=t;R=R._parentComponent;)(O=R).base=A;A._component=O,A._componentConstructor=O.constructor}}for(!y||n?x.push(t):_||(t.componentDidUpdate&&t.componentDidUpdate(u,f,w),i.afterUpdate&&i.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);k||o||C()}}function P(t){i.beforeUnmount&&i.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?P(n):e&&(null!=e.__preactattr_&&p(e.__preactattr_.ref,null),t.nextBase=e,b(e),I.push(t),D(e)),p(t.__ref,null)}function R(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function $(t,e,n){return E(n,t,{},!1,e,!1)}c(R.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=c(c({},this.state),\"function\"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),h(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),L(this,2)},render:function(){}});function B(t,...e){let n=[];return\"annotation\"===t?e.forEach(t=>{if(t)for(const e in t)t.hasOwnProperty(e)&&n.push(t[e])}):e.forEach(t=>{if(t)for(const e in t)t.hasOwnProperty(e)&&(n=n.concat(t[e]))}),n=n.sort((t,e)=>Number(t[1].annotationId>e[1].annotationId))}var j=class extends R{constructor(...t){super(...t),this.renderElement=t=>l(...t),this.onMouseDown=t=>{if(\"MOVE\"!==this.state.mode&&0===t.button){t.stopPropagation();const e=this.calculateCoords(t);this.props.dispatch({type:\"PRESS\",x:e.x,y:e.y}),this.base.style.cursor=\"pointer\"}},this.onMouseUp=t=>{if(\"MOVE\"!==this.state.mode){t.stopPropagation();const e=this.calculateCoords(t);this.props.dispatch({type:\"RELEASE\",x:e.x,y:e.y})}this.base.style.cursor=\"default\"},this.onMouseMove=t=>{if(\"MOVE\"!==this.state.mode){t.stopPropagation();const e=this.calculateCoords(t);this.props.dispatch({type:\"MOVE\",x:e.x,y:e.y})}},this.onMouseLeave=t=>{if(\"MOVE\"!==this.state.mode){t.stopPropagation();const e=this.calculateCoords(t);this.props.dispatch({type:\"LEAVE_CANVAS\",x:e.x,y:e.y})}this.base.style.cursor=\"default\"}}calculateCoords(t){const e=this.base.getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top;return{x:Math.round(n/e.width*1e4)/100,y:Math.round(o/e.height*1e4)/100}}getInitialState(){return this.props.model}componentDidMount(){this.props.model.addHandler(\"CHANGE_EVENT\",()=>{this.setState(this.props.model)})}render(){let t;return l(\"div\",t=null===window.onpointerdown?{id:\"svg_wrapper\",width:\"100%\",height:\"100%\",style:\"\",onPointerDown:this.onMouseDown,onPointerUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove}:{id:\"svg_wrapper\",width:\"100%\",height:\"100%\",style:\"\",onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},l(\"svg\",{id:\"svg\",xmlns:\"http://www.w3.org/2000/svg\",version:\"1.1\",preserveAspectRatio:\"none\",viewBox:\"0 0 100 100\",width:\"100%\",height:\"100%\"},B(\"annotation\",this.state.annotations,this.state.markerLines).map(t=>this.renderElement(t))),B(\"marker\",this.state.markers).map(t=>this.renderElement(t)))}},H=n(1);var V=(t,...e)=>{const n=new H.Dispatcher;return e.forEach(e=>{n.register(e(t))}),t=>n.dispatch(t)};var W=t=>{const e=e=>{e.stopPropagation();const n=e.target.attributes.annotationId.value;delete t.annotations[n],delete t.markers[n],delete t.markerLines[n],t.delMarksCallback&&t.delMarksCallback(n),t.raiseEvent(\"CHANGE_EVENT\")},n=e=>{e.stopPropagation();const n=e.target.attributes.annotationId.value;t.clickAnnotationCallback&&t.clickAnnotationCallback(n)};return o=>{switch(o.type){case\"INITIALIZE\":t.zoom=o.zoom,t.width=o.width,t.height=o.height;break;case\"ZOOM_UPDATE\":t.zoom=o.zoom;break;case\"MODE_UPDATE\":t.drawingId=\"\",t.mode!==o.mode&&(t.mode=o.mode);break;case\"ANNOTATIONS_RESET\":t.drawingId=\"\",t.annotations=o.annotations||{};break;case\"MARKERS_REST\":t.drawingId=\"\",t.markers=o.markers||{};break;case\"PRESS\":if(\"DRAW\"===t.mode){t.drawingId=(()=>{let t=\"\";for(let e=1;e<=32;e++)t+=Math.floor(16*Math.random()).toString(16),8!==e&&12!==e&&16!==e&&20!==e||(t+=\"-\");return t})();const e=t.drawingId;switch(t.style.type){case\"measureDistance\":t.markers[e]=[],t.markers[e].push([\"span\",{id:`tip_${e}`,annotationId:e,class:\"measure-tip\",start:{x:o.x,y:o.y}},\"\"]),t.markers[e].push([\"div\",{id:`startPoint_${e}`,annotationId:e,class:\"start-point\",style:{top:`${o.y}%`,left:`${o.x}%`}}]),t.markers[e].push([\"div\",{id:`endPoint_${e}`,annotationId:e,class:\"end-point\",style:{top:`${o.y}%`,left:`${o.x}%`}}]),t.markerLines[e]=[\"line\",{id:`meameasureDistance_${e}`,annotationId:e,type:\"measureDistance\",x1:o.x,y1:o.y,x2:o.x,y2:o.y,stroke:\"red\",\"stroke-width\":3}];break;case\"measureArea\":t.annotations[e]=[\"polyline\",{id:`measureArea_${e}`,annotationId:e,points:`${o.x},${o.y}`,stroke:t.style.color||\"red\",fill:t.style.fill||\"none\",\"stroke-width\":t.style.width||3,onMouseDown:n}];break;case\"polyline\":t.annotations[e]=[\"polyline\",{id:`polyline_${e}`,annotationId:e,points:`${o.x},${o.y}`,stroke:t.style.color||\"red\",fill:t.style.fill||\"none\",\"stroke-width\":t.style.width||3,onMouseDown:n}];break;case\"polygon\":t.annotations[e]=[\"polygon\",{id:`polygon_${e}`,annotationId:e,points:`${o.x},${o.y}`,stroke:t.style.color||\"red\",fill:t.style.fill||\"none\",\"stroke-width\":t.style.width||3,onMouseDown:n}];break;case\"line\":t.annotations[e]=[\"line\",{id:`line_${e}`,annotationId:e,x1:o.x,y1:o.y,x2:o.x,y2:o.y,stroke:t.style.color||\"red\",fill:t.style.fill||\"none\",\"stroke-width\":t.style.width||3,onMouseDown:n}];break;case\"ellipse\":t.annotations[e]=[\"ellipse\",{id:`ellipse_${e}`,annotationId:e,cx:o.x,cy:o.y,rx:0,ry:0,stroke:t.style.color||\"red\",fill:t.style.fill||\"none\",\"stroke-width\":t.style.width||3,onMouseDown:n}];break;case\"rect\":t.annotations[e]=[\"rect\",{id:`rect_${e}`,annotationId:e,sx:o.x,sy:o.y,x:o.x,y:o.y,width:0,height:0,stroke:t.style.color||\"red\",fill:t.style.fill||\"none\",\"stroke-width\":t.style.width||3,onMouseDown:n}];break;default:t.annotations[e]=[\"path\",{id:`path_${e}`,annotationId:e,d:`M${o.x} ${o.y}`,stroke:t.style.color||\"red\",fill:t.style.fill||\"none\",\"stroke-width\":t.style.width||3,onMouseDown:n}]}}break;case\"MOVE\":if((o.x>0&&o.x<100&&o.y>0||o.y<100)&&\"DRAW\"===t.mode&&t.drawingId){const e=t.annotations[t.drawingId];if(e)switch(e[0]){case\"polyline\":case\"polygon\":e[1].points+=` ${o.x},${o.y}`;break;case\"line\":e[1].x2=o.x,e[1].y2=o.y;break;case\"ellipse\":e[1].rx=Math.abs(o.x-e[1].cx),e[1].ry=Math.abs(o.y-e[1].cy);break;case\"rect\":e[1].x=e[1].sx<o.x?e[1].sx:o.x,e[1].y=e[1].sy<o.y?e[1].sy:o.y,e[1].width=Math.abs(e[1].sx-o.x),e[1].height=Math.abs(e[1].sy-o.y);break;default:e[1].d+=` L${o.x} ${o.y}`}else{const e=t.markers[t.drawingId],n=e[0],r=e[2],i=t.markerLines[t.drawingId];let s;i[1].x2=o.x,i[1].y2=o.y,s=i[1].y2>=i[1].y1?\"translate(-5px, 10px)\":\"translate(-5px, -32px)\",n[1].style=`top: ${o.y}%; left: ${o.x}%; transform: ${s}`;const a=Math.pow(Math.round((o.x-n[1].start.x)*t.imageWidth*.01),2),l=Math.pow(Math.round((o.y-n[1].start.y)*t.imageHeight*.01),2),c=Math.round(Math.sqrt(a+l)*t.pixelRatio);n[2]=`${c}μm`,r[1].style=`top: ${o.y}%; left: ${o.x}%`}}break;case\"RELEASE\":case\"LEAVE_CANVAS\":if(\"DRAW\"===t.mode&&t.drawingId){const n=t.drawingId,r=t.annotations[n];if(t.drawingId=!1,r)switch(/measureArea_/.test(r[1].id)&&(r[1].points.split(\" \").length>=3?(r[0]=\"polygon\",t.markers[n]=[],t.markers[n].push([\"div\",{id:`close_${n}`,annotationId:n,class:\"icon-close\",style:{top:`${o.y}%`,left:`${o.x}%`,transform:\"translate(0, 20px)\"},onMouseDown:e}])):delete t.annotations[n]),r[0]){case\"polyline\":case\"polygon\":case\"line\":case\"ellipse\":case\"rect\":default:t.addAnnotationCallback&&t.addAnnotationCallback(r)}else{const o=t.markers[n],r=t.markerLines[n];if(o[0][2]){let o;o=r[1].x2>=r[1].x1?\"translate(8px, -8px)\":\"translate(-24px, -8px)\",t.markers[n].push([\"div\",{id:`close_${n}`,annotationId:n,class:\"icon-close\",style:{top:`${r[1].y2}%`,left:`${r[1].x2}%`,transform:o},onMouseDown:e}])}else delete t.annotations[n],delete t.markers[n],delete t.markerLines[n]}}}t.raiseEvent(\"CHANGE_EVENT\")}};n(4);const z={onOpen(){this.overlay=$(l(j,{dispatch:this.dispatch,model:this.model}),document.body);const t=this.viewer.world.getHomeBounds(),e=this.viewer.viewport.getZoom();this.viewer.addOverlay(this.overlay,new o.Rect(0,0,t.width,t.height,0));const{width:n,height:r}=this.overlay.getBoundingClientRect();this.dispatch({type:\"INITIALIZE\",zoom:e,width:n,height:r})},getAnnotations(){return this.model.annotations},setAnnotations(t){this.dispatch({type:\"ANNOTATIONS_RESET\",annotations:t})},cleanAnnotations(){this.dispatch({type:\"ANNOTATIONS_RESET\"})},getMarkers(){return this.model.markers},setMarkers(t){this.dispatch({type:\"MARKERS_REST\",markers:t})},getMode(){return this.model.mode},setMode(t){this.dispatch({type:\"MODE_UPDATE\",mode:t})},getStatus(){return{active:!!this.overlay}},setStyle(t){t||(t={}),t.type&&(this.model.style.type=t.type),t.color&&(this.model.style.color=t.color),t.width&&(this.model.style.width=t.width),t.fill&&(this.model.style.fill=t.fill)},onStartDraw(t){this.setStyle(t),this.dispatch({type:\"MODE_UPDATE\",mode:\"DRAW\"})},onStopDraw(){this.dispatch({type:\"MODE_UPDATE\",mode:\"MOVE\"})},setClickAnnotationCallback(t){this.model.clickAnnotationCallback=t},setAddAnnotationCallback(t){this.model.addAnnotationCallback=t},cleanMarkers(){this.model.markers={},this.model.markerLines={}},setImageConfig(t,e,n){this.model.imageWidth=t,this.model.imageHeight=e,this.model.pixelRatio=n}};e.default={init:({viewer:t,imageHeight:e,imageWidth:n,pixelRatio:r})=>{const i=(()=>Object.assign(Object.create(o.EventSource.prototype),{events:{},mode:\"MOVE\",zoom:1,width:0,height:0,imageWidth:0,imageHeight:0,pixelRatio:1,drawingId:\"\",addAnnotationCallback:null,clickAnnotationCallback:null,delMarksCallback:null,annotations:{},markers:{},markerLines:{},style:{type:\"polyline\",color:\"red\",fill:\"none\",width:3}}))();i.imageHeight=e,i.imageWidth=n,i.pixelRatio=r;const s=V(i,W),a=Object.create(z);return Object.assign(a,{viewer:t,model:i,dispatch:s}),t.addHandler(\"open\",()=>a.onOpen()),t.addHandler(\"zoom\",({zoom:t})=>a.dispatch({type:\"ZOOM_UPDATE\",zoom:t})),t.isOpen()&&a.onOpen(),a}}}]);","extractedComments":[]}